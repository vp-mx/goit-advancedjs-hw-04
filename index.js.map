{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgArr => {\n    return imgArr.reduce((acc, el) => {\n        return (\n            acc +\n            `\n            <li class=\"gallery-card\">\n              <a class=\"gallery-img-orig\" href=\"${el.largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n                <div class=\"img-data\">\n                 <div class=\"img-data-column img-likes\">\n                  <p class=\"img-title\">Likes</p>\n                  <p class=\"img-value\">${el.likes}</p>\n                 </div>\n                 <div class=\"img-data-column img-views\">\n                  <p class=\"img-title\">Views</p>\n                  <p class=\"img-value\">${el.views}</p>\n                 </div>\n                 <div class=\"img-data-column img-comments\">\n                  <p class=\"img-title\">Comments</p>\n                  <p class=\"img-value\">${el.comments}</p>\n                 </div>\n                  <div class=\"img-data-column img-downloads\">\n                  <p class=\"img-title\">Downloads</p>\n                  <p class=\"img-value\">${el.downloads}</p>\n                 </div>\n                </div>\n              </a>\n            </li>\n           `\n        )\n    }, '');\n};\n","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotosByQuery = (searchedQuery, page) => {\n    const requestParams = {\n        q: searchedQuery,\n        page: page,\n        key: \"50950053-db3558a1af50bab2399c0c009\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n    };\n\n    return axios.get('/api/', { params: requestParams });\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\nimport { fetchPhotosByQuery } from \"./js/pixabay-api\";\n\nconst searchFormEl = document.querySelector(\".js-search-form\");\nconst galleryEl = document.querySelector(\".js-gallery\");\nconst loaderEl = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet simplelightbox = new SimpleLightbox(\".gallery-card a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nlet page = 1;\nlet inputValue = '';\n\n\nconst onSearchFormSubmit = async (event) => {\n    try {\n        event.preventDefault();\n\n        inputValue = event.currentTarget.elements.user_query.value.trim();\n\n        if (inputValue === \"\") {\n            iziToast.error({\n                message: \"Search value should not be empty!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        searchFormEl.reset();\n\n        galleryEl.innerHTML = \"\";\n        loadMoreButton.classList.add(\"is-hidden\");\n        loaderEl.classList.remove(\"is-hidden\");\n\n        page = 1;\n\n        const response = await fetchPhotosByQuery(inputValue, page);\n\n        loaderEl.classList.add(\"is-hidden\");\n\n        if (response.data.totalHits === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            galleryEl.innerHTML = \"\";\n            searchFormEl.reset();\n            return;\n        }\n\n        if (response.data.totalHits > 15) {\n            loadMoreButton.classList.remove(\"is-hidden\");\n            loadMoreButton.addEventListener(\"click\", onLoadMoreButtonClick);\n        }\n\n        galleryEl.innerHTML = createGalleryCardTemplate(response.data.hits);\n        smoothScroll();\n        simplelightbox.refresh();\n    } catch (err) {\n        iziToast.error({\n            message: 'An error occurred. Please try again later.',\n            position: 'topRight',\n        });\n    }\n};\n\nsearchFormEl.addEventListener(\"submit\", onSearchFormSubmit);\n\nconst onLoadMoreButtonClick = async (event) => {\n    try {\n        loadMoreButton.classList.add(\"is-hidden\");\n        loaderEl.classList.remove(\"is-hidden\");\n\n        page++;\n        const response = await fetchPhotosByQuery(inputValue, page);\n\n        loaderEl.classList.add(\"is-hidden\");\n        loadMoreButton.classList.remove(\"is-hidden\");\n\n        galleryEl.insertAdjacentHTML(\"beforeend\", createGalleryCardTemplate(response.data.hits));\n        smoothScroll();\n        simplelightbox.refresh();\n\n        if (response.data.totalHits <= page * 15) {\n            loadMoreButton.classList.add(\"is-hidden\");\n            loadMoreButton.removeEventListener(\"click\", onLoadMoreButtonClick);\n\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n    } catch (err) {\n        iziToast.error({\n            message: 'An error occurred. Please try again later.',\n            position: 'topRight',\n        });\n    }\n};\n\nfunction smoothScroll() {\n    const galleryCardEl = document.querySelector(\".gallery-card\");\n    if (!galleryCardEl) return;\n    const rect = galleryCardEl.getBoundingClientRect();\n    const cardHeight = rect.height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n}\n"],"names":["createGalleryCardTemplate","imgArr","acc","el","axios","fetchPhotosByQuery","searchedQuery","page","requestParams","searchFormEl","galleryEl","loaderEl","loadMoreButton","simplelightbox","SimpleLightbox","inputValue","onSearchFormSubmit","event","iziToast","response","onLoadMoreButtonClick","smoothScroll","galleryCardEl","cardHeight"],"mappings":"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"}